🚀 功能开发计划文档 (Backlog)
📅 第一阶段：核心能力增强 (高优先级)
这些功能直接影响“科学上网”的核心体验，建议优先完成。

1. 自动节点选择 (URL Test / Auto Select)
功能描述：创建一个虚拟的“自动选择”节点。软件在后台自动测试一组节点的延迟，并将流量动态转发到延迟最低的节点。

用户价值：用户无需手动测速和切换，永远使用最快的节点。

技术思路：

后端：在生成 config.json 时，在 outbounds 中增加一个 type 为 urltest 的出站组，将所有代理节点放入 outbounds 字段中。

前端：在节点列表中新增一个特殊的“自动选择”卡片，ID 设为特殊值（如 auto-group）。

2. TUN 模式 (虚拟网卡 / 全局接管)
功能描述：不再依赖系统代理（System Proxy），而是创建一个虚拟网卡，接管电脑所有流量（包括终端、游戏、不支持代理的软件）。

用户价值：真正的“全局代理”，解决游戏无法加速、命令行不走代理的问题。

技术思路：

后端：在 singbox 配置的 inbounds 中添加 tun 类型。

权限：Windows 下启动 TUN 模式通常需要管理员权限，需要处理 UAC 提权问题。

3. 支持更多新协议 (VLESS / Hysteria2 / Tuic)
功能描述：增加对新一代抗封锁协议的解析和配置生成支持。

用户价值：由于 GFW 升级，旧的 VMess/Trojan 可能被断流，新协议速度更快、更稳。

技术思路：

后端 (subscriptions.rs)：升级解析逻辑，支持 vless://, hy2:// 等链接格式。

后端 (config.rs)：在生成 Sing-box 配置时，映射对应的协议字段（如 flow, packet_encoding 等）。

📊 第二阶段：可视化与统计 (体验提升)
让软件看起来更专业，让用户对网络状态“心里有数”。

4. 实时网速显示 (Dashboard)
功能描述：在首页显示当前的 上传速度 (↑) 和 下载速度 (↓)。

技术思路：

后端：Sing-box 核心提供了 Traffic API。Rust 侧开启一个定时器（每秒一次），调用 API 获取流量数据，通过 app.emit("traffic-update", ...) 发送给前端。

前端：监听事件并更新 UI 仪表盘。

5. 历史流量统计
功能描述：记录并展示“今日已用流量”、“本月已用流量”。

技术思路：

后端：每次关闭软件前，将内存中的流量计数写入本地数据库（SQLite 或 JSON）。

6. 真·延迟测试与 IP 归属地
功能描述：

真连接测试：不再只是 TCP 握手（Ping），而是通过节点真实发起 HTTP 请求（如访问 Google），检测是否真的能联网。

IP 归属地：显示节点出口 IP 是“美国”、“香港”还是“日本”。

技术思路：

前端：调用后端 http_ping 接口。

后端：请求 http://ip-api.com/json 等接口获取地理位置信息。

🛠️ 第三阶段：高级设置与工具 (极客需求)
7. 自定义规则编辑器 (Routing Rules)
功能描述：允许用户手动添加域名到“强制代理”或“强制直连”列表。

用户价值：解决某些国内网站被误杀，或者某些冷门国外网站没走代理的问题。

技术思路：

UI：类似现在的白名单界面，增加“黑名单（强制代理）”管理。

后端：在 config.rs 生成路由规则时，优先插入用户的自定义规则。

8. 分应用代理 (Process Rule)
功能描述：指定特定软件（如 chrome.exe）走代理，其他软件直连。

技术思路：

利用 Sing-box 的 process_name 路由规则。

9. 订阅自动更新
功能描述：后台静默更新订阅源，防止节点过期。

技术思路：Rust 后端启动时检查上次更新时间，超过设定阈值（如 24h）则自动触发 update_all_subscriptions。

🎨 第四阶段：细节打磨
10. 二维码分享
功能：生成节点二维码供手机扫码。

实现：前端使用 qrcode.react 等库将分享链接渲染为二维码图片。

11. 深色模式 (Dark Mode)
功能：跟随系统或手动切换黑夜主题。

实现：利用 Tailwind CSS 的 dark: 修饰符和 window.matchMedia API。